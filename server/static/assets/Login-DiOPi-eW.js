import{r as v,a as S,c as p,o as m,b as t,d as B,e as s,w as o,f as r,u as C,_ as L,g as N,h as b,i as w,j,l as z,E as _}from"./index-EJWQmZrC.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"login-container"},K={class:"login-content"},R={class:"login-wrapper"},q={class:"card-content"},I={key:0},M={key:1},O={__name:"Login",setup(T){const h=C(),i=v(),n=v(!1),a=S({username:"",password:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},l=async()=>{if(i.value)try{await i.value.validate(),n.value=!0;const e=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username,password:a.password})})).json();e.success?(localStorage.setItem("auth_token",e.token),_.success("登录成功"),h.push("/")):_.error(e.error||"登录失败")}catch(d){console.error("登录失败:",d),_.error("登录失败，请检查网络连接")}finally{n.value=!1}};return(d,e)=>{const f=r("el-icon"),g=r("el-input"),c=r("el-form-item"),k=r("el-button"),V=r("el-form"),x=r("el-card");return m(),p("div",F,[e[4]||(e[4]=t("div",{class:"login-background"},[t("div",{class:"bg-pattern"})],-1)),t("div",K,[t("div",R,[e[3]||(e[3]=B('<div class="login-header" data-v-a2f6bdd6><div class="logo-section" data-v-a2f6bdd6><img src="'+L+'" alt="Logo" class="login-logo" data-v-a2f6bdd6><h1 class="app-title" data-v-a2f6bdd6>SingBox Web</h1></div><p class="login-subtitle" data-v-a2f6bdd6>管理系统</p></div>',1)),s(x,{class:"login-card",shadow:"hover"},{default:o(()=>[t("div",q,[e[2]||(e[2]=t("h2",{class:"form-title"},"登录",-1)),s(V,{model:a,rules:y,ref_key:"loginFormRef",ref:i,class:"login-form",onSubmit:N(l,["prevent"])},{default:o(()=>[s(c,{prop:"username",class:"form-item"},{default:o(()=>[s(g,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=u=>a.username=u),placeholder:"请输入用户名",size:"large",class:"form-input",onKeyup:b(l,["enter"])},{prefix:o(()=>[s(f,{class:"input-icon"},{default:o(()=>[s(w(j))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(c,{prop:"password",class:"form-item"},{default:o(()=>[s(g,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=u=>a.password=u),type:"password",placeholder:"请输入密码",size:"large",class:"form-input","show-password":"",onKeyup:b(l,["enter"])},{prefix:o(()=>[s(f,{class:"input-icon"},{default:o(()=>[s(w(z))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(c,{class:"form-item submit-item"},{default:o(()=>[s(k,{type:"primary",size:"large",loading:n.value,onClick:l,class:"login-button"},{default:o(()=>[n.value?(m(),p("span",M,"登录中...")):(m(),p("span",I,"登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])]),_:1})])])])}}},P=E(O,[["__scopeId","data-v-a2f6bdd6"]]);export{P as default};
